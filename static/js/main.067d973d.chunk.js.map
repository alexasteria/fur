{"version":3,"sources":["components/map.js","components/minimap.js","components/add.js","App.js","index.js"],"names":["MapComponent","props","state","lat","long","zoom","this","coords","setState","style","height","width","scroll","Map","position","center","TileLayer","url","CircleMarker","React","Component","MiniMapComponent","Add","useState","photo1","setPhoto1","photo2","setPhoto2","photo3","setPhoto3","handleFileSelect","evt","f","target","files","type","match","console","log","reader","FileReader","onload","e","result","readAsDataURL","Fragment","header","mode","separator","size","backgroundPosition","backgroundSize","backgroundImage","onChange","event","backgroundColor","top","controlSize","marginTop","color","name","value","description","defaultChecked","App","setCoords","bridge","send","then","res","catch","activeStory","setActiveStory","tabbar","onClick","selected","data-story","text","id","activePanel","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.067d973d.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Map, CircleMarker, TileLayer } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\n\r\nclass MapComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            lat: 55.753960,\r\n            long: 37.620393,\r\n            zoom: 12\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.coords.lat !== 0){\r\n            this.setState({lat: this.props.coords.lat, long: this.props.coords.long, zoom: this.props.coords.zoom})\r\n        }\r\n    }\r\n\r\n    render() {\r\n            return (\r\n                <div style={{ height: \"100%\", width: \"100%\", scroll: \"noscroll\"}}>\r\n                    <Map\r\n                        style={{ height: \"100%\", width: \"100%\", position: 'absolute'}}\r\n                        zoom={this.state.zoom}\r\n                        center={[this.props.coords.lat !== 0 ? this.props.coords.lat : this.state.lat, this.props.coords.long !==0 ? this.props.coords.long : this.state.long]}>\r\n                        <TileLayer url=\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n                        <CircleMarker\r\n                            center={[this.state.lat, this.state.long]}\r\n                        />\r\n                    </Map>\r\n                </div>\r\n            );\r\n        }\r\n}\r\n\r\nexport default MapComponent;","import React, { Component } from 'react';\r\nimport { Map, CircleMarker, TileLayer } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\n\r\nclass MiniMapComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            lat: 55.753960,\r\n            long: 37.620393,\r\n            zoom: 12\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.coords.lat !== 0){\r\n            this.setState({lat: this.props.coords.lat, long: this.props.coords.long, zoom: this.props.coords.zoom})\r\n        }\r\n    }\r\n\r\n    render() {\r\n            return (\r\n                <div style={{ height: \"200px\", width: \"100%\", scroll: \"noscroll\"}}>\r\n                    <Map\r\n                        style={{ height: \"200px\", width: \"100%\", position: 'absolute'}}\r\n                        zoom={this.state.zoom}\r\n                        center={[this.state.lat, this.state.long]}>\r\n                        <TileLayer url=\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n                        <CircleMarker\r\n                            center={[this.state.lat, this.state.long]}\r\n                        />\r\n                    </Map>\r\n                </div>\r\n            );\r\n        }\r\n}\r\n\r\nexport default MiniMapComponent;","import React, { useState, useEffect } from 'react';\r\nimport {CardGrid, Card, Group, FormLayout, Radio, Header, Button, File} from '@vkontakte/vkui';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\nimport Icon36Add from '@vkontakte/icons/dist/36/add';\r\nimport MiniMapComponent from './minimap';\r\nimport App from \"../App\";\r\n\r\nconst Add = (props) => {\r\n    const [photo1, setPhoto1] = useState(null);\r\n    const [photo2, setPhoto2] = useState(null);\r\n    const [photo3, setPhoto3] = useState(null);\r\n    function handleFileSelect(evt) {\r\n        let file = evt.target.files; // FileList object\r\n        let f = file[0];\r\n        // Only process image files.\r\n        if (!f.type.match('image.*')) {\r\n            console.log(\"Image only please....\");\r\n        }\r\n        let reader = new FileReader();\r\n        // Closure to capture the file information.\r\n        reader.onload = ((theFile) => {\r\n            return function(e) {\r\n                if (photo1 === null){\r\n                    setPhoto1('url('+e.target.result +')');\r\n                } else if (photo2 === null){\r\n                    setPhoto2('url('+e.target.result +')');\r\n                } else if (photo3 === null){\r\n                    setPhoto3('url('+e.target.result +')');\r\n                }\r\n            };\r\n        })(f);\r\n        // Read in the image file as a data URL.\r\n        reader.readAsDataURL(f);\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <Group header={<Header mode=\"secondary\">Сделайте отметку на карте</Header>}>\r\n                <MiniMapComponent coords={props.coords} height={'400px'}/>\r\n            </Group>\r\n        <Group separator=\"hide\" header={<Header mode=\"secondary\">Добавьте фотографии</Header>}>\r\n            <CardGrid>\r\n                <Card size=\"s\" mode=\"shadow\">\r\n                    <div style={{ height: 96, backgroundPosition: 'center', backgroundSize: 'cover', backgroundImage: photo1}}>\r\n                        {\r\n                            photo1 === null &&\r\n                            <File onChange={(event)=>handleFileSelect(event)} style={{height: '100%', width: '100%', backgroundColor: \"#00ffff00\"}} top=\"\" controlSize=\"xl\">\r\n                                <Icon36Add style={{marginTop: '19px', color: \"#9ec1ea\"}}/>\r\n                            </File>\r\n                        }\r\n                    </div>\r\n                </Card>\r\n                <Card size=\"s\" mode=\"shadow\">\r\n                    <div style={{ height: 96, backgroundPosition: 'center', backgroundSize: 'cover', backgroundImage: photo2}}>\r\n                        {\r\n                            photo2 === null &&\r\n                            <File onChange={(event)=>handleFileSelect(event)} style={{height: '100%', width: '100%', backgroundColor: \"#00ffff00\"}} top=\"\" controlSize=\"xl\">\r\n                                <Icon36Add style={{marginTop: '19px', color: \"#9ec1ea\"}}/>\r\n                            </File>\r\n                        }\r\n                    </div>\r\n                </Card><Card size=\"s\" mode=\"shadow\">\r\n                <div style={{ height: 96, backgroundPosition: 'center', backgroundSize: 'cover', backgroundImage: photo3}}>\r\n                    {\r\n                        photo3 === null &&\r\n                        <File onChange={(event)=>handleFileSelect(event)} style={{height: '100%', width: '100%', backgroundColor: \"#00ffff00\"}} top=\"\" controlSize=\"xl\">\r\n                            <Icon36Add style={{marginTop: '19px', color: \"#9ec1ea\"}}/>\r\n                        </File>\r\n                    }\r\n                </div>\r\n            </Card>\r\n            </CardGrid>\r\n        </Group>\r\n            <Group header={<Header mode=\"secondary\">Укажите тип отметки</Header>}>\r\n                <FormLayout>\r\n                    <div>\r\n                        <Radio name=\"radio\" value=\"1\" description=\"Тренога\" defaultChecked>Передвижная камера</Radio>\r\n                        <Radio name=\"radio\" value=\"2\" description=\"Стационарный\">Пост ДПС</Radio>\r\n                        <Radio name=\"radio\" value=\"3\" description=\"Проверки и спецоперации\">Мобильная группа ДПС</Radio>\r\n                    </div>\r\n                </FormLayout>\r\n            </Group>\r\n            <Group header={<Header mode=\"secondary\">Завершите добавление</Header>}>\r\n                <Button size=\"xl\" mode=\"secondary\">Добавить на карту</Button>\r\n            </Group>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nexport default Add;","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport { View, Panel, PanelHeader, Epic, Tabbar, TabbarItem, Cell} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Icon28Search from '@vkontakte/icons/dist/28/search';\nimport Icon28AddOutline from '@vkontakte/icons/dist/28/add_outline';\nimport MapComponent from './components/map';\nimport Add from './components/add';\nimport '@vkontakte/vkui/dist/vkui.css';\n\n\nconst App = () => {\n\tconst [coords, setCoords] = useState({lat: 0, long: 0});\n\tbridge.send(\"VKWebAppGetGeodata\", {})\n\t\t.then(res=>{\n\t\t\tsetCoords({lat: res.lat, long: res.long, zoom: 13});\n\t\t})\n\t\t.catch(e=>console.log(e));\n\tconst [activeStory, setActiveStory] = useState(\"map\");\n\t\treturn (\n\t\t\t<Epic activeStory={activeStory} tabbar={\n\t\t\t\t<Tabbar>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={()=>setActiveStory('map')}\n\t\t\t\t\t\tselected={activeStory === 'map'}\n\t\t\t\t\t\tdata-story=\"map\"\n\t\t\t\t\t\ttext=\"Карта\"\n\t\t\t\t\t><Icon28Search /></TabbarItem>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={()=>setActiveStory('add')}\n\t\t\t\t\t\tselected={activeStory === 'add'}\n\t\t\t\t\t\tdata-story=\"add\"\n\t\t\t\t\t\ttext=\"Добавить\"\n\t\t\t\t\t><Icon28AddOutline /></TabbarItem>\n\t\t\t\t</Tabbar>\n\t\t\t}>\n\t\t\t\t<View id=\"map\" activePanel=\"map\">\n\t\t\t\t\t<Panel id=\"map\">\n\t\t\t\t\t\t<PanelHeader>Карта</PanelHeader>\n\t\t\t\t\t\t<MapComponent coords={coords}/>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t\t<View id=\"add\" activePanel=\"add\">\n\t\t\t\t\t<Panel id=\"add\">\n\t\t\t\t\t\t<PanelHeader>Добавить</PanelHeader>\n\t\t\t\t\t\t<Add coords={coords}/>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t</Epic>\n\t\t);\n};\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\", {});\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}